<html>
  <html>
    <head>
      <meta charset="utf-8" />
      <title>Create A Group</title>
      <meta name="comp1800 boilerplate code" content="my bcit project" />
      <meta name="author" content="BCIT" />

      <!-- Bootstrap for Mobile-first, and JQuery -->
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
      />
      <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
        crossorigin="anonymous"
      />
      <link
        type="text/css"
        rel="stylesheet"
        href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css"
      />
      <!-- Optional styles and scripts of your own -->
      <link rel="stylesheet" href="createGroupV2.css">
    </head>
    <body>
      <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Cineder</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#"
                  >Swiping Page</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Group Settings</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Matches</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="container" id = "formDiv">
        <div class="mb-3">
          <label for="groupName" class="form-label">Choose a Group Name:</label>
          <input type="text" class="form-control" id="groupName" placeholder="Group Name">
        </div>
        <br />
        <div class="mb-3">
          <label for="groupDescription" class="form-label">Group Description</label>
          <textarea class="form-control" id="groupDescription" rows="3" placeholder="Type a brief description of your group so others can join!"></textarea>
        </div>
        <div class="input-group mb-3">
          <label class="input-group-text" for="groupPhoto">Options</label>
          <select class="form-select" id="groupPhoto">
            <option selected>Choose a Group Photo..</option>
            <option value="empty_cinema">Theatre</option>
            <option value="friend_group">Sunset</option>
            <option value="projector">Camera</option>
          </select>
        </div>
        <input id="makeGroupPublic" type="checkbox" />
        <label class="form-check-label"> Make group public </label>
        <br />
        <br />
        <!-- <button type="submit" id="createGroup" onclick="location.href = 'groups.html';">Create Group!</button> -->
        <!-- <a href = "groups.html"> -->
        <button href="groups.html" type="button" class="btn btn-secondary" id="createGroup">Create Group!</button>
        <!-- </a> -->
        <!-- <button type="button" id="createGroup" class="btn btn-outline-success">Create Group!</button> -->
      </div>
      <!----------------------------------------------->
      <!-- JS: Boostrap, Firebase, API related    -->
      <!----------------------------------------------->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"
      ></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
      <!-- Link to the api keys for your firebase project -->
      <script src="scripts/firebase_api_joel.js"></script>

      <!--------------------------------------------------------------------->
      <!-- JS files: Your own JavaScript functions included here    -->
      <!--------------------------------------------------------------------->
      <script>
        function getFormInputs() {
          document
            .getElementById("createGroup")
            .addEventListener("click", function () {
              firebase.auth().onAuthStateChanged(function (user) {
                // get various values from the form
                var name = document.getElementById("groupName").value;
                var desc = document.getElementById("groupDescription").value;
                var photo = document.getElementById("groupPhoto").value;

                // Either true or false
                var public = document.getElementById("makeGroupPublic").checked;

                db.collection("groups").add({
                  name: name,
                  description: desc, // from textarea
                  photo: photo,//from dropdown menu
                  public: public, //from checkbox
                });
                setTimeout(function () {
                  window.location.href = "groups.html"; // this delay allows it to write to DB before redirect
                }, 2000);
              });
            });
        }

        getFormInputs();
      </script>
    </body>
  </html>
</html>
